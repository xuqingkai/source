<!DOCTYPE html>
<html lang="zh">
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
  <title>有来有去科技</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.19.2/dist/css/uikit.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/uikit@3.19.2/dist/js/uikit.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/uikit@3.19.2/dist/js/uikit-icons.min.js"></script>
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
</head>
<body>
<script>
	$(function(){
		$.get('https://api.github.com/repos/xuqingkai/sucai/contents/' + window.location.search.replace('?',''),function(list){
			for(var i in list){
	  			if(list[i].type=='dir'){
					if(i==0){
						var queryString='';
						var path=list[i].path.split('/');
		  				for(var j=0; j<path.length; j++){
		  					queryString+='/'+path[j];
							$('#dir').append(' / <a href="?'+queryString.substr(1)+'">'+path[j]+'</a>');
		  				}
					}else{
						$('#dir').append(' | <a href="?'+list[i].path+'">'+list[i].name+'</a>');
					}
					
	  			}else{
	  				var ext=list[i].name.substr(list[i].name.lastIndexOf('.') + 1);
	  				if(ext=='jpg' || ext=='png' || ext=='gif' || ext=='webp' || ext=='svg' || ext=='ico'){
		    				$('#file').append('<div><a href="'+list[i].path+'" data-type="image"><img src="'+list[i].path+'" alt=""/></a></div>');
		    				$('#file').append('<div><a href="'+list[i].path+'" data-type="image"><img src="'+list[i].path+'" alt=""/></a></div>');
		    				$('#file').append('<div><a href="'+list[i].path+'" data-type="image"><img src="'+list[i].path+'" alt=""/></a></div>');
		  			}else if(ext=='mp4' || ext=='webm'){
		  				$('#file').append('<div><a href="'+list[i].path+'" data-type="video"><img src="'+list[i].path+'" alt=""/></a></div>');
		  			}
				}
			
			}
			var lightbox = UIkit.lightbox('#file');
			for(var i in lightbox){
				window.alert(i + ':' + lightbox[i]);
			}
			//var slideshow = UIkit.slideshow('.uk-lightbox');//index prevIndex percent getIndex() maxIndex
			document.getElementById('.uk-lightbox').onmousewheel=function (event) {
				event = event || window.event;
				var direction = event.wheelDelta && (event.wheelDelta > 0 ? -1 : 1);
				if((direction<0 && lightbox.index>0) || (direction>0 && lightbox.index<lightbox.length-1)){
					event.preventDefault();
					if(direction<0){UIkit.scroll('#scroll-to-top').scrollTo('body');}
					lightbox.show((lightbox.index + direction) % lightbox.length);
				}
	
				
			};
		});
	});

    
</script>
<div id="dir"><a href="?">首页</a></div>
<div id="file" class="uk-child-width-1-2@s uk-child-width-1-3@m uk-child-width-1-5@l" uk-grid="parallax: 200"></div>
<div id="scroll-to-top" uk-scroll></div>
</body>
</html>
